<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash!</title>
    <link rel="shortcut icon" href="./favicon.ico">
</head>
<body>
    <button id="startButton">
        START!
    </button>

    <style>
        *{
            margin: none;
            padding: none;
            height: none;
            width: none;
            text-align: center;
        }

        #startButton{
            width: 1600px;
            height: 400px;
            font-size: 60px;
            top: 0;
            margin-top: 15%; 
        }
    </style>

    <script>
        //condtion変数の設定
        let condition = false
        //i2変数の設定
        let i2 = 0;
        //ボタンを取得
        const getButton = document.querySelector('#startButton');
        //乱数生成
        const generate = (Math.floor(Math.random() * 100) + 1);
        const rundomNumber = [
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
            (Math.floor(Math.random() * 100) + 1),
        ];

        //乱数の合計（答）を計算
        
        const tortal = rundomNumber.reduce(function(sum, element) {
            return sum + element;
        },0);
        console.log(`tortalは${tortal}です`);
        
        //rundomNumberのlengthを取得
        let rLength = rundomNumber.length
        let piyo = (rLength * 8000) + 7800;
        //ボタンを押したときのイベントを予約
        getButton.addEventListener('click', function countdown() {
            //要素の削除＆追加してCSSを整える            
            getButton.remove();
            const textElement = document.createElement('h1');
            textElement.style.fontSize = '200px';
            textElement.style.textAlign = 'center';
            textElement.style.marginTop = '400px';
            textElement.textContent = '開始まで';
            document.body.appendChild(textElement);
            //要素をカウントダウンへ書き換え
            let i = 5;
            const countdown = setInterval(function a() {
                textElement.textContent = `${i}秒`;
                i--;
                if(i < 0) {
                    clearInterval(countdown);
                    condition = true
                }
            },1000);
            //hoge関数(乱数を表示)
            function hoge() {
                const display = setInterval(function Display() {
                    textElement.textContent = rundomNumber[i2];
                    i2++
                    if(i2 > 21) {
                        clearTimeout(display)
                        textElement.remove()
                        const paragraph = document.createElement('p');
                        paragraph.textContent = '回答を入力してください';
                        paragraph.style.fontSize = '50px';
                        document.body.appendChild(paragraph);
                        const formElement = document.createElement('form');
                        formElement.classList.add('form');
                        formElement.style.color = 'black'
                        document.body.appendChild(formElement);
                        const input = document.createElement('input');
                        input.style.marginTop = '450px';
                        input.type = 'number'
                        input.style.height = '300';
                        input.style.width = '750px';
                        input.size = '200';
                        input.classList.add('input');
                        const hugahuga = document.querySelector('.input');
                        const sendButton = document.createElement('button');
                        sendButton.textContent = '送信';
                        sendButton.classList.add('sendButton');
                        document.body.append(sendButton);
                        const hogera = document.querySelector('.input');
                        const getForm = document.querySelector('.form');
                        getForm.appendChild(input);
                        console.log(formElement);
                        function success() {
                            if(input.value == tortal) {
                                window.alert('正解！！');
                            } else {
                                window.alert(`不正解。正解は${tortal}でした。`)
                            }
                        };
                        sendButton.addEventListener('click', success);
                        
                    }
                },800);
            };

            setTimeout(hoge, 6000);

            
            
           
            
        });


    </script>
    
</body>
</html>
